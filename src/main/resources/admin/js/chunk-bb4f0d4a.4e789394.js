(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb4f0d4a"],{"26ea":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=this,e=a.$createElement,o=a._self._c||e;return o("div",{staticClass:"page-header-index-wide"},[o("a-row",[o("a-col",{attrs:{span:24}},[o("div",{staticClass:"card-container"},[o("a-tabs",{attrs:{type:"card"}},[o("a-tab-pane",{key:"general"},[o("span",{attrs:{slot:"tab"},slot:"tab"},[o("a-icon",{attrs:{type:"tool"}}),a._v("常规设置\n            ")],1),o("a-form",{attrs:{layout:"vertical"}},[o("a-form-item",{attrs:{label:"博客标题：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.blog_title,callback:function(t){a.$set(a.options,"blog_title",t)},expression:"options.blog_title"}})],1),o("a-form-item",{attrs:{label:"博客地址：","wrapper-col":a.wrapperCol}},[o("a-input",{attrs:{placeholder:"如：https://halo.run"},model:{value:a.options.blog_url,callback:function(t){a.$set(a.options,"blog_url",t)},expression:"options.blog_url"}})],1),o("a-form-item",{attrs:{label:"Logo：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.blog_logo,callback:function(t){a.$set(a.options,"blog_logo",t)},expression:"options.blog_logo"}},[o("a",{attrs:{slot:"addonAfter",href:"javascript:void(0);"},on:{click:function(){return t.logoDrawerVisible=!0}},slot:"addonAfter"},[o("a-icon",{attrs:{type:"picture"}})],1)])],1),o("a-form-item",{attrs:{label:"Favicon：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.blog_favicon,callback:function(t){a.$set(a.options,"blog_favicon",t)},expression:"options.blog_favicon"}},[o("a",{attrs:{slot:"addonAfter",href:"javascript:void(0);"},on:{click:function(){return t.faviconDrawerVisible=!0}},slot:"addonAfter"},[o("a-icon",{attrs:{type:"picture"}})],1)])],1),o("a-form-item",{attrs:{label:"页脚信息：","wrapper-col":a.wrapperCol}},[o("a-input",{attrs:{type:"textarea",autosize:{minRows:5}},model:{value:a.options.blog_footer_info,callback:function(t){a.$set(a.options,"blog_footer_info",t)},expression:"options.blog_footer_info"}})],1),o("a-form-item",[o("a-button",{attrs:{type:"primary"},on:{click:a.handleSaveOptions}},[a._v("保存")])],1)],1)],1),o("a-tab-pane",{key:"seo"},[o("span",{attrs:{slot:"tab"},slot:"tab"},[o("a-icon",{attrs:{type:"global"}}),a._v("SEO 设置\n            ")],1),o("a-form",{attrs:{layout:"vertical"}},[o("a-form-item",{attrs:{label:"屏蔽搜索引擎：","wrapper-col":a.wrapperCol}},[o("a-switch",{model:{value:a.options.seo_spider_disabled,callback:function(t){a.$set(a.options,"seo_spider_disabled",t)},expression:"options.seo_spider_disabled"}})],1),o("a-form-item",{attrs:{label:"关键词： ","wrapper-col":a.wrapperCol}},[o("a-tooltip",{attrs:{trigger:["focus"],placement:"right",title:"多个关键词以英文逗号隔开"}},[o("a-input",{model:{value:a.options.seo_keywords,callback:function(t){a.$set(a.options,"seo_keywords",t)},expression:"options.seo_keywords"}})],1)],1),o("a-form-item",{attrs:{label:"博客描述：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.seo_description,callback:function(t){a.$set(a.options,"seo_description",t)},expression:"options.seo_description"}})],1),o("a-form-item",[o("a-button",{attrs:{type:"primary"},on:{click:a.handleSaveOptions}},[a._v("保存")])],1)],1)],1),o("a-tab-pane",{key:"post"},[o("span",{attrs:{slot:"tab"},slot:"tab"},[o("a-icon",{attrs:{type:"form"}}),a._v("文章设置\n            ")],1),o("a-form",{attrs:{layout:"vertical"}},[o("a-form-item",{attrs:{label:"首页显示条数：","wrapper-col":a.wrapperCol}},[o("a-input",{attrs:{type:"number"},model:{value:a.options.post_index_page_size,callback:function(t){a.$set(a.options,"post_index_page_size",t)},expression:"options.post_index_page_size"}})],1),o("a-form-item",{attrs:{label:"RSS 显示条数：","wrapper-col":a.wrapperCol}},[o("a-input",{attrs:{type:"number"},model:{value:a.options.rss_page_size,callback:function(t){a.$set(a.options,"rss_page_size",t)},expression:"options.rss_page_size"}})],1),o("a-form-item",{attrs:{label:"文章摘要字数：","wrapper-col":a.wrapperCol}},[o("a-input",{attrs:{type:"number"},model:{value:a.options.post_summary_length,callback:function(t){a.$set(a.options,"post_summary_length",t)},expression:"options.post_summary_length"}})],1),o("a-form-item",[o("a-button",{attrs:{type:"primary"},on:{click:a.handleSaveOptions}},[a._v("保存")])],1)],1)],1),o("a-tab-pane",{key:"comment"},[o("span",{attrs:{slot:"tab"},slot:"tab"},[o("a-icon",{attrs:{type:"message"}}),a._v("评论设置\n            ")],1),o("a-form",{attrs:{layout:"vertical"}},[o("a-form-item",{attrs:{label:"评论者头像：","wrapper-col":a.wrapperCol}},[o("a-select",{model:{value:a.options.comment_gravatar_default,callback:function(t){a.$set(a.options,"comment_gravatar_default",t)},expression:"options.comment_gravatar_default"}},[o("a-select-option",{attrs:{value:"mm"}},[a._v("默认")]),o("a-select-option",{attrs:{value:"identicon"}},[a._v("抽象几何图形")]),o("a-select-option",{attrs:{value:"monsterid"}},[a._v("小怪物")]),o("a-select-option",{attrs:{value:"wavatar"}},[a._v("Wavatar")]),o("a-select-option",{attrs:{value:"retro"}},[a._v("复古")]),o("a-select-option",{attrs:{value:"robohash"}},[a._v("机器人")]),o("a-select-option",{attrs:{value:"blank"}},[a._v("不显示头像")])],1)],1),o("a-form-item",{attrs:{label:"评论审核后才显示：","wrapper-col":a.wrapperCol}},[o("a-switch",{model:{value:a.options.comment_new_need_check,callback:function(t){a.$set(a.options,"comment_new_need_check",t)},expression:"options.comment_new_need_check"}})],1),o("a-form-item",{attrs:{label:"新评论通知：","wrapper-col":a.wrapperCol}},[o("a-switch",{model:{value:a.options.comment_new_notice,callback:function(t){a.$set(a.options,"comment_new_notice",t)},expression:"options.comment_new_notice"}})],1),o("a-form-item",{attrs:{label:"评论回复通知对方：","wrapper-col":a.wrapperCol}},[o("a-switch",{model:{value:a.options.comment_reply_notice,callback:function(t){a.$set(a.options,"comment_reply_notice",t)},expression:"options.comment_reply_notice"}})],1),o("a-form-item",{attrs:{label:"API 评论开关：","wrapper-col":a.wrapperCol}},[o("a-switch",{model:{value:a.options.comment_api_enabled,callback:function(t){a.$set(a.options,"comment_api_enabled",t)},expression:"options.comment_api_enabled"}})],1),o("a-form-item",{attrs:{label:"每页显示条数： ","wrapper-col":a.wrapperCol}},[o("a-input",{attrs:{type:"number"},model:{value:a.options.comment_page_size,callback:function(t){a.$set(a.options,"comment_page_size",t)},expression:"options.comment_page_size"}})],1),o("a-form-item",{attrs:{label:"占位提示：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.comment_content_placeholder,callback:function(t){a.$set(a.options,"comment_content_placeholder",t)},expression:"options.comment_content_placeholder"}})],1),o("a-form-item",[o("a-button",{attrs:{type:"primary"},on:{click:a.handleSaveOptions}},[a._v("保存")])],1)],1)],1),o("a-tab-pane",{key:"attachment"},[o("span",{attrs:{slot:"tab"},slot:"tab"},[o("a-icon",{attrs:{type:"picture"}}),a._v("附件设置\n            ")],1),o("a-form",{attrs:{layout:"vertical"}},[o("a-form-item",{attrs:{label:"存储位置：","wrapper-col":a.wrapperCol}},[o("a-select",{on:{change:a.handleAttachChange},model:{value:a.options.attachment_type,callback:function(t){a.$set(a.options,"attachment_type",t)},expression:"options.attachment_type"}},a._l(Object.keys(a.attachmentType),function(t){return o("a-select-option",{key:t,attrs:{value:t}},[a._v(a._s(a.attachmentType[t].text))])}),1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:a.upyunFormHidden,expression:"upyunFormHidden"}],staticClass:"upyunForm"},[o("a-form-item",{attrs:{label:"域名：","wrapper-col":a.wrapperCol}},[o("a-tooltip",{attrs:{trigger:["focus"],placement:"right",title:"需要加上 http:// 或者 https://"}},[o("a-input",{model:{value:a.options.oss_upyun_domain,callback:function(t){a.$set(a.options,"oss_upyun_domain",t)},expression:"options.oss_upyun_domain"}})],1)],1),o("a-form-item",{attrs:{label:"空间名称：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_upyun_bucket,callback:function(t){a.$set(a.options,"oss_upyun_bucket",t)},expression:"options.oss_upyun_bucket"}})],1),o("a-form-item",{attrs:{label:"操作员名称：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_upyun_operator,callback:function(t){a.$set(a.options,"oss_upyun_operator",t)},expression:"options.oss_upyun_operator"}})],1),o("a-form-item",{attrs:{label:"操作员密码：","wrapper-col":a.wrapperCol}},[o("a-input",{attrs:{type:"password"},model:{value:a.options.oss_upyun_password,callback:function(t){a.$set(a.options,"oss_upyun_password",t)},expression:"options.oss_upyun_password"}})],1),o("a-form-item",{attrs:{label:"文件目录：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_upyun_source,callback:function(t){a.$set(a.options,"oss_upyun_source",t)},expression:"options.oss_upyun_source"}})],1),o("a-form-item",{attrs:{label:"缩略图处理策略：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_upyun_style_rule,callback:function(t){a.$set(a.options,"oss_upyun_style_rule",t)},expression:"options.oss_upyun_style_rule"}})],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:a.qnyunFormHidden,expression:"qnyunFormHidden"}],staticClass:"qnyunForm"},[o("a-form-item",{attrs:{label:"区域：","wrapper-col":a.wrapperCol}},[o("a-select",{model:{value:a.options.oss_qiniu_zone,callback:function(t){a.$set(a.options,"oss_qiniu_zone",t)},expression:"options.oss_qiniu_zone"}},[o("a-select-option",{attrs:{value:"auto"}},[a._v("自动选择")]),o("a-select-option",{attrs:{value:"z0"}},[a._v("华东")]),o("a-select-option",{attrs:{value:"z1"}},[a._v("华北")]),o("a-select-option",{attrs:{value:"z2"}},[a._v("华南")]),o("a-select-option",{attrs:{value:"na0"}},[a._v("北美")]),o("a-select-option",{attrs:{value:"as0"}},[a._v("东南亚")])],1)],1),o("a-form-item",{attrs:{label:"域名：","wrapper-col":a.wrapperCol}},[o("a-tooltip",{attrs:{trigger:["focus"],placement:"right",title:"需要加上 http:// 或者 https://"}},[o("a-input",{model:{value:a.options.oss_qiniu_domain,callback:function(t){a.$set(a.options,"oss_qiniu_domain",t)},expression:"options.oss_qiniu_domain"}})],1)],1),o("a-form-item",{attrs:{label:"Access Key：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_qiniu_access_key,callback:function(t){a.$set(a.options,"oss_qiniu_access_key",t)},expression:"options.oss_qiniu_access_key"}})],1),o("a-form-item",{attrs:{label:"Secret Key：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_qiniu_secret_key,callback:function(t){a.$set(a.options,"oss_qiniu_secret_key",t)},expression:"options.oss_qiniu_secret_key"}})],1),o("a-form-item",{attrs:{label:"Bucket：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_qiniu_bucket,callback:function(t){a.$set(a.options,"oss_qiniu_bucket",t)},expression:"options.oss_qiniu_bucket"}})],1),o("a-form-item",{attrs:{label:"缩略图处理策略：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_qiniu_style_rule,callback:function(t){a.$set(a.options,"oss_qiniu_style_rule",t)},expression:"options.oss_qiniu_style_rule"}})],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:a.aliyunFormHidden,expression:"aliyunFormHidden"}],staticClass:"aliyunForm"},[o("a-form-item",{attrs:{label:"Bucket：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_aliyun_bucket_name,callback:function(t){a.$set(a.options,"oss_aliyun_bucket_name",t)},expression:"options.oss_aliyun_bucket_name"}})],1),o("a-form-item",{attrs:{label:"EndPoint（地域节点）：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_aliyun_endpoint,callback:function(t){a.$set(a.options,"oss_aliyun_endpoint",t)},expression:"options.oss_aliyun_endpoint"}})],1),o("a-form-item",{attrs:{label:"Access Key：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_aliyun_access_key,callback:function(t){a.$set(a.options,"oss_aliyun_access_key",t)},expression:"options.oss_aliyun_access_key"}})],1),o("a-form-item",{attrs:{label:"Access Secret：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_aliyun_access_secret,callback:function(t){a.$set(a.options,"oss_aliyun_access_secret",t)},expression:"options.oss_aliyun_access_secret"}})],1),o("a-form-item",{attrs:{label:"缩略图处理策略：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.oss_aliyun_style_rule,callback:function(t){a.$set(a.options,"oss_aliyun_style_rule",t)},expression:"options.oss_aliyun_style_rule"}})],1)],1),o("a-form-item",[o("a-button",{attrs:{type:"primary"},on:{click:a.handleSaveOptions}},[a._v("保存")])],1)],1)],1),o("a-tab-pane",{key:"smtp"},[o("span",{attrs:{slot:"tab"},slot:"tab"},[o("a-icon",{attrs:{type:"mail"}}),a._v("SMTP 服务\n            ")],1),o("div",{staticClass:"custom-tab-wrapper"},[o("a-tabs",[o("a-tab-pane",{key:"1",attrs:{tab:"发信设置"}},[o("a-form",{attrs:{layout:"vertical"}},[o("a-form-item",{attrs:{label:"是否启用：","wrapper-col":a.wrapperCol}},[o("a-switch",{model:{value:a.options.email_enabled,callback:function(t){a.$set(a.options,"email_enabled",t)},expression:"options.email_enabled"}})],1),o("a-form-item",{attrs:{label:"SMTP 地址：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.email_host,callback:function(t){a.$set(a.options,"email_host",t)},expression:"options.email_host"}})],1),o("a-form-item",{attrs:{label:"发送协议：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.email_protocol,callback:function(t){a.$set(a.options,"email_protocol",t)},expression:"options.email_protocol"}})],1),o("a-form-item",{attrs:{label:"SSL 端口：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.email_ssl_port,callback:function(t){a.$set(a.options,"email_ssl_port",t)},expression:"options.email_ssl_port"}})],1),o("a-form-item",{attrs:{label:"邮箱账号：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.email_username,callback:function(t){a.$set(a.options,"email_username",t)},expression:"options.email_username"}})],1),o("a-form-item",{attrs:{label:"邮箱密码：","wrapper-col":a.wrapperCol}},[o("a-tooltip",{attrs:{trigger:["focus"],placement:"right",title:"部分邮箱可能是授权码"}},[o("a-input",{model:{value:a.options.email_password,callback:function(t){a.$set(a.options,"email_password",t)},expression:"options.email_password"}})],1)],1),o("a-form-item",{attrs:{label:"发件人：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.email_from_name,callback:function(t){a.$set(a.options,"email_from_name",t)},expression:"options.email_from_name"}})],1),o("a-form-item",[o("a-button",{attrs:{type:"primary"},on:{click:a.handleSaveOptions}},[a._v("保存")])],1)],1)],1),o("a-tab-pane",{key:"2",attrs:{tab:"发送测试"}},[o("a-form",{attrs:{layout:"vertical"}},[o("a-form-item",{attrs:{label:"收件人：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.mailParam.to,callback:function(t){a.$set(a.mailParam,"to",t)},expression:"mailParam.to"}})],1),o("a-form-item",{attrs:{label:"主题：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.mailParam.subject,callback:function(t){a.$set(a.mailParam,"subject",t)},expression:"mailParam.subject"}})],1),o("a-form-item",{attrs:{label:"内容：","wrapper-col":a.wrapperCol}},[o("a-input",{attrs:{type:"textarea",autosize:{minRows:5}},model:{value:a.mailParam.content,callback:function(t){a.$set(a.mailParam,"content",t)},expression:"mailParam.content"}})],1),o("a-form-item",[o("a-button",{attrs:{type:"primary"},on:{click:a.handleTestMailClick}},[a._v("发送")])],1)],1)],1)],1)],1)]),o("a-tab-pane",{key:"api"},[o("span",{attrs:{slot:"tab"},slot:"tab"},[o("a-icon",{attrs:{type:"align-left"}}),a._v("API 设置\n            ")],1),o("a-form",{attrs:{layout:"vertical"}},[o("a-form-item",{attrs:{label:"API 服务：","wrapper-col":a.wrapperCol}},[o("a-switch",{model:{value:a.options.api_enabled,callback:function(t){a.$set(a.options,"api_enabled",t)},expression:"options.api_enabled"}})],1),o("a-form-item",{attrs:{label:"Access key：","wrapper-col":a.wrapperCol}},[o("a-input",{model:{value:a.options.api_access_key,callback:function(t){a.$set(a.options,"api_access_key",t)},expression:"options.api_access_key"}})],1),o("a-form-item",[o("a-button",{attrs:{type:"primary"},on:{click:a.handleSaveOptions}},[a._v("保存")])],1)],1)],1),o("a-tab-pane",{key:"other"},[o("span",{attrs:{slot:"tab"},slot:"tab"},[o("a-icon",{attrs:{type:"align-left"}}),a._v("其他设置\n            ")],1),o("a-form",{attrs:{layout:"vertical"}},[o("a-form-item",{attrs:{label:"自定义 head：","wrapper-col":a.wrapperCol}},[o("a-input",{attrs:{type:"textarea",autosize:{minRows:5}},model:{value:a.options.blog_custom_head,callback:function(t){a.$set(a.options,"blog_custom_head",t)},expression:"options.blog_custom_head"}})],1),o("a-form-item",{attrs:{label:"统计代码：","wrapper-col":a.wrapperCol}},[o("a-input",{attrs:{type:"textarea",autosize:{minRows:5}},model:{value:a.options.blog_statistics_code,callback:function(t){a.$set(a.options,"blog_statistics_code",t)},expression:"options.blog_statistics_code"}})],1),o("a-form-item",[o("a-button",{attrs:{type:"primary"},on:{click:a.handleSaveOptions}},[a._v("保存")])],1)],1)],1)],1)],1)])],1),o("AttachmentSelectDrawer",{attrs:{title:"选择 Logo"},on:{listenToSelect:a.handleSelectLogo},model:{value:a.logoDrawerVisible,callback:function(t){a.logoDrawerVisible=t},expression:"logoDrawerVisible"}}),o("AttachmentSelectDrawer",{attrs:{title:"选择 Favicon"},on:{listenToSelect:a.handleSelectFavicon},model:{value:a.faviconDrawerVisible,callback:function(t){a.faviconDrawerVisible=t},expression:"faviconDrawerVisible"}})],1)},s=[],n=e("e20c"),i=e("3993"),l=e("482b"),r=e("9efd"),p="/api/admin/mails",c={testMail:function(t){return Object(r["a"])({url:"".concat(p,"/test"),method:"post",data:t})}},u=c,m=e("a796"),d=e("591a"),_={components:{AttachmentSelectDrawer:i["a"]},data:function(){return{attachmentType:m["a"].type,wrapperCol:{xl:{span:8},lg:{span:8},sm:{span:12},xs:{span:24}},upyunFormHidden:!1,qnyunFormHidden:!1,aliyunFormHidden:!1,logoDrawerVisible:!1,faviconDrawerVisible:!1,options:[],mailParam:{}}},mounted:function(){this.loadOptions()},methods:Object(n["a"])({},Object(d["b"])(["loadUser"]),{loadOptions:function(){var t=this;l["a"].listAll().then(function(a){t.options=a.data.data,t.handleAttachChange(t.options["attachment_type"])})},handleSaveOptions:function(){var t=this;l["a"].save(this.options).then(function(a){t.loadOptions(),t.loadUser(),t.$message.success("保存成功！")})},handleAttachChange:function(t){switch(t){case"LOCAL":case"SMMS":this.upyunFormHidden=!1,this.qnyunFormHidden=!1,this.aliyunFormHidden=!1;break;case"UPYUN":this.upyunFormHidden=!0,this.qnyunFormHidden=!1,this.aliyunFormHidden=!1;break;case"QNYUN":this.qnyunFormHidden=!0,this.upyunFormHidden=!1,this.aliyunFormHidden=!1;break;case"ALIYUN":this.aliyunFormHidden=!0,this.qnyunFormHidden=!1,this.upyunFormHidden=!1;break}},handleSelectLogo:function(t){this.options.blog_logo=t.path,this.logoDrawerVisible=!1},handleTestMailClick:function(){var t=this;u.testMail(this.mailParam).then(function(a){t.$message.info(a.data.message)})},handleSelectFavicon:function(t){this.options.blog_favicon=t.path,this.faviconDrawerVisible=!1}})},b=_,f=e("17cc"),v=Object(f["a"])(b,o,s,!1,null,null,null);a["default"]=v.exports},"307b":function(t,a,e){"use strict";var o=e("6fda"),s=e.n(o);s.a},3993:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a-drawer",{attrs:{title:t.title,width:t.isMobile()?"100%":t.drawerWidth,closable:"",visible:t.visiable,destroyOnClose:""},on:{close:t.onClose}},[e("a-row",{attrs:{type:"flex",align:"middle"}},[e("a-input-search",{attrs:{placeholder:"搜索附件",enterButton:""}})],1),e("a-divider"),e("a-row",{attrs:{type:"flex",align:"middle"}},[e("a-skeleton",{attrs:{active:"",loading:t.skeletonLoading,paragraph:{rows:18}}},[e("a-col",{attrs:{span:24}},t._l(t.attachments,function(a,o){return e("div",{key:o,staticClass:"attach-item",on:{click:function(e){return t.handleSelectAttachment(a)}}},[e("img",{attrs:{src:a.thumbPath}})])}),0)],1)],1),e("a-divider"),e("div",{staticClass:"page-wrapper"},[e("a-pagination",{attrs:{defaultPageSize:t.pagination.size,total:t.pagination.total},on:{change:t.handlePaginationChange}})],1),e("a-divider",{staticClass:"divider-transparent"}),e("div",{staticClass:"bottom-control"},[t.isChooseAvatar?e("a-button",{staticStyle:{marginRight:"8px"},attrs:{type:"dashed"},on:{click:t.handleSelectGravatar}},[t._v("使用 Gravatar")]):t._e(),e("a-button",{attrs:{type:"primary"},on:{click:t.handleShowUploadModal}},[t._v("上传附件")])],1)],1),e("a-modal",{attrs:{title:"上传附件",footer:null,afterClose:t.onUploadClose},model:{value:t.uploadVisible,callback:function(a){t.uploadVisible=a},expression:"uploadVisible"}},[e("upload",{attrs:{name:"file",multiple:"",uploadHandler:t.attachmentUploadHandler}},[e("p",{staticClass:"ant-upload-drag-icon"},[e("a-icon",{attrs:{type:"inbox"}})],1),e("p",{staticClass:"ant-upload-text"},[t._v("点击选择文件或将文件拖拽到此处")]),e("p",{staticClass:"ant-upload-hint"},[t._v("支持单个或批量上传")])])],1)],1)},s=[],n=(e("d4d5"),e("ac0d")),i=e("a796"),l={name:"AttachmentSelectDrawer",mixins:[n["a"],n["b"]],model:{prop:"visiable",event:"close"},props:{visiable:{type:Boolean,required:!1,default:!1},drawerWidth:{type:Number,required:!1,default:460},title:{type:String,required:!1,default:"选择附件"},isChooseAvatar:{type:Boolean,required:!1,default:!1}},data:function(){return{uploadVisible:!1,skeletonLoading:!0,pagination:{page:1,size:12,sort:""},attachments:[],attachmentUploadHandler:i["a"].upload}},created:function(){this.loadSkeleton(),this.loadAttachments()},watch:{visiable:function(t,a){t&&this.loadSkeleton()}},methods:{loadSkeleton:function(){var t=this;this.skeletonLoading=!0,setTimeout(function(){t.skeletonLoading=!1},500)},handleShowUploadModal:function(){this.uploadVisible=!0},loadAttachments:function(){var t=this,a=Object.assign({},this.pagination);a.page--,i["a"].query(a).then(function(a){t.attachments=a.data.data.content,t.pagination.total=a.data.data.total})},handleSelectAttachment:function(t){this.$emit("listenToSelect",t)},handleSelectGravatar:function(){this.$emit("listenToSelectGravatar")},handlePaginationChange:function(t,a){this.pagination.page=t,this.pagination.size=a,this.loadAttachments()},handleAttachmentUploadSuccess:function(){this.$message.success("上传成功！"),this.loadAttachments()},onUploadClose:function(){this.loadSkeleton(),this.loadAttachments()},onClose:function(){this.$emit("close",!1)}}},r=l,p=(e("307b"),e("17cc")),c=Object(p["a"])(r,o,s,!1,null,null,null);a["a"]=c.exports},"6fda":function(t,a,e){},a796:function(t,a,e){"use strict";var o=e("f753"),s=e.n(o),n=e("9efd"),i="/api/admin/attachments",l={query:function(t){return Object(n["a"])({url:i,params:t,method:"get"})},get:function(t){return Object(n["a"])({url:"".concat(i,"/").concat(t),method:"get"})},delete:function(t){return Object(n["a"])({url:"".concat(i,"/").concat(t),method:"delete"})},update:function(t,a){return Object(n["a"])({url:"".concat(i,"/").concat(t),method:"put",data:a})},getMediaTypes:function(){return Object(n["a"])({url:"".concat(i,"/media_types"),method:"get"})}};l.CancelToken=s.a.CancelToken,l.isCancel=s.a.isCancel,l.upload=function(t,a,e){return Object(n["a"])({url:"".concat(i,"/upload"),timeout:864e4,data:t,onUploadProgress:a,cancelToken:e,method:"post"})},l.uploads=function(t,a,e){return Object(n["a"])({url:"".concat(i,"/uploads"),timeout:864e4,data:t,onUploadProgress:a,cancelToken:e,method:"post"})},l.type={LOCAL:{type:"local",text:"本地"},SMMS:{type:"smms",text:"SM.MS"},UPYUN:{type:"upyun",text:"又拍云"},QNYUN:{type:"qnyun",text:"七牛云"},ALIYUN:{type:"aliyun",text:"阿里云"}},a["a"]=l}}]);