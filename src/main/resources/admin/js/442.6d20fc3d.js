"use strict";(self["webpackChunkhalo_admin"]=self["webpackChunkhalo_admin"]||[]).push([[442],{90442:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form",{attrs:{wrapperCol:e.wrapperCol,layout:"vertical"}},[a("a-form-item",{attrs:{label:"开发者选项："}},[a("a-switch",{model:{value:e.options.developer_mode,callback:function(t){e.$set(e.options,"developer_mode",t)},expression:"options.developer_mode"}})],1),a("a-form-item",[a("ReactiveButton",{attrs:{errored:e.errored,loading:e.saving,erroredText:"保存失败",loadedText:"保存成功",text:"保存",type:"primary"},on:{callback:function(t){e.errored=!1},click:e.handleSaveOptions}})],1)],1)},r=[],s=a(98906),i=a(1540),n={name:"SettingsForm",data(){return{options:{},wrapperCol:{xl:{span:8},lg:{span:8},sm:{span:12},xs:{span:24}},saving:!1,errored:!1}},created(){this.handleListOptions()},methods:{...(0,s.nv)(["refreshOptionsCache"]),async handleListOptions(){try{const{data:e}=await i.Z.option.listAsMapViewByKeys(["developer_mode"]);this.options=e}catch(e){this.$log.error(e)}},async handleSaveOptions(){try{this.saving=!0,await i.Z.option.saveMapView(this.options)}catch(e){this.errored=!1,this.$log.error(e)}finally{setTimeout((()=>{this.saving=!1}),400),await this.handleListOptions(),await this.refreshOptionsCache(),this.options.developer_mode||await this.$router.replace({name:"ToolList"})}}}},l=n,p=a(18156),d=(0,p.Z)(l,o,r,!1,null,null,null),h=d.exports}}]);